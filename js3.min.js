var curiemap=(function(b){function a(d){var c={};Object.keys(d).forEach(function(e){c[d[e]]=e});return c}return Object.defineProperties(b,{resolve:{writable:false,configurable:false,enumerable:false,value:function(e){var c=e.indexOf(":");if(c<0||e.indexOf("//")>=0){return e}var d=e.slice(0,c).toLowerCase();if(!this[d]){return e}return this[d].concat(e.slice(++c))}},setDefault:{writable:false,configurable:false,enumerable:false,value:function(c){this[""]=c;return this}},getPrefix:{writable:false,configurable:false,enumerable:false,value:function(c){return a(this)[c]}},shrink:{writable:false,configurable:false,enumerable:false,value:function(c){for(pref in this){if(c.substr(0,this[pref].length)==this[pref]){return pref+":"+c.slice(this[pref].length)}}return c}},})})({owl:"http://www.w3.org/2002/07/owl#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rdfa:"http://www.w3.org/ns/rdfa#",xhv:"http://www.w3.org/1999/xhtml/vocab#",xml:"http://www.w3.org/XML/1998/namespace",xsd:"http://www.w3.org/2001/XMLSchema#",grddl:"http://www.w3.org/2003/g/data-view#",powder:"http://www.w3.org/2007/05/powder#",powders:"http://www.w3.org/2007/05/powder-s#",rif:"http://www.w3.org/2007/rif#",atom:"http://www.w3.org/2005/Atom/",xhtml:"http://www.w3.org/1999/xhtml#",formats:"http://www.w3.org/ns/formats/",xforms:"http://www.w3.org/2002/xforms/",xhtmlvocab:"http://www.w3.org/1999/xhtml/vocab/",xpathfn:"http://www.w3.org/2005/xpath-functions#",http:"http://www.w3.org/2006/http#",link:"http://www.w3.org/2006/link#",time:"http://www.w3.org/2006/time#",acl:"http://www.w3.org/ns/auth/acl#",cert:"http://www.w3.org/ns/auth/cert#",rsa:"http://www.w3.org/ns/auth/rsa#",crypto:"http://www.w3.org/2000/10/swap/crypto#",list:"http://www.w3.org/2000/10/swap/list#",log:"http://www.w3.org/2000/10/swap/log#",math:"http://www.w3.org/2000/10/swap/math#",os:"http://www.w3.org/2000/10/swap/os#",string:"http://www.w3.org/2000/10/swap/string#",doc:"http://www.w3.org/2000/10/swap/pim/doc#",contact:"http://www.w3.org/2000/10/swap/pim/contact#",p3p:"http://www.w3.org/2002/01/p3prdfv1#",swrl:"http://www.w3.org/2003/11/swrl#",swrlb:"http://www.w3.org/2003/11/swrlb#",exif:"http://www.w3.org/2003/12/exif/ns#",earl:"http://www.w3.org/ns/earl#",ma:"http://www.w3.org/ns/ma-ont#",sawsdl:"http://www.w3.org/ns/sawsdl#",sd:"http://www.w3.org/ns/sparql-service-description#",skos:"http://www.w3.org/2004/02/skos/core#",fresnel:"http://www.w3.org/2004/09/fresnel#",gen:"http://www.w3.org/2006/gen/ont#",timezone:"http://www.w3.org/2006/timezone#",skosxl:"http://www.w3.org/2008/05/skos-xl#",org:"http://www.w3.org/ns/org#",ical:"http://www.w3.org/2002/12/cal/ical#",wgs84:"http://www.w3.org/2003/01/geo/wgs84_pos#",vcard:"http://www.w3.org/2006/vcard/ns#",turtle:"http://www.w3.org/2008/turtle#",pointers:"http://www.w3.org/2009/pointers#",dcat:"http://www.w3.org/ns/dcat#",imreg:"http://www.w3.org/2004/02/image-regions#",rdfg:"http://www.w3.org/2004/03/trix/rdfg-1/",swp:"http://www.w3.org/2004/03/trix/swp-2/",rei:"http://www.w3.org/2004/06/rei#",wairole:"http://www.w3.org/2005/01/wai-rdf/GUIRoleTaxonomy#",states:"http://www.w3.org/2005/07/aaa#",wn20schema:"http://www.w3.org/2006/03/wn/wn20/schema/",httph:"http://www.w3.org/2007/ont/httph#",act:"http://www.w3.org/2007/rif-builtin-action#",common:"http://www.w3.org/2007/uwa/context/common.owl#",dcn:"http://www.w3.org/2007/uwa/context/deliverycontext.owl#",hard:"http://www.w3.org/2007/uwa/context/hardware.owl#",java:"http://www.w3.org/2007/uwa/context/java.owl#",loc:"http://www.w3.org/2007/uwa/context/location.owl#",net:"http://www.w3.org/2007/uwa/context/network.owl#",push:"http://www.w3.org/2007/uwa/context/push.owl#",soft:"http://www.w3.org/2007/uwa/context/software.owl#",web:"http://www.w3.org/2007/uwa/context/web.owl#",content:"http://www.w3.org/2008/content#",vs:"http://www.w3.org/2003/06/sw-vocab-status/ns#",air:"http://dig.csail.mit.edu/TAMI/2007/amord/air#",ex:"http://example.org/",dc:"http://purl.org/dc/terms/",dc11:"http://purl.org/dc/elements/1.1/",dctype:"http://purl.org/dc/dcmitype/",foaf:"http://xmlns.com/foaf/0.1/",cc:"http://creativecommons.org/ns#",opensearch:"http://a9.com/-/spec/opensearch/1.1/","void":"http://rdfs.org/ns/void#",sioc:"http://rdfs.org/sioc/ns#",sioca:"http://rdfs.org/sioc/actions#",sioct:"http://rdfs.org/sioc/types#",lgd:"http://linkedgeodata.org/vocabulary#",moat:"http://moat-project.org/ns#",days:"http://ontologi.es/days#",giving:"http://ontologi.es/giving#",lang:"http://ontologi.es/lang/core#",like:"http://ontologi.es/like#",status:"http://ontologi.es/status#",og:"http://opengraphprotocol.org/schema/",protege:"http://protege.stanford.edu/system#",dady:"http://purl.org/NET/dady#",uri:"http://purl.org/NET/uri#",audio:"http://purl.org/media/audio#",video:"http://purl.org/media/video#",gridworks:"http://purl.org/net/opmv/types/gridworks#",hcterms:"http://purl.org/uF/hCard/terms/",bio:"http://purl.org/vocab/bio/0.1/",cs:"http://purl.org/vocab/changeset/schema#",geographis:"http://telegraphis.net/ontology/geography/geography#",doap:"http://usefulinc.com/ns/doap#",daml:"http://www.daml.org/2001/03/daml+oil#",geonames:"http://www.geonames.org/ontology#",sesame:"http://www.openrdf.org/schema/sesame#",cv:"http://rdfs.org/resume-rdf/",wot:"http://xmlns.com/wot/0.1/",media:"http://purl.org/microformat/hmedia/",ctag:"http://commontag.org/ns#"});var propertymap=(function(a){return Object.defineProperties(a,{resolve:{writable:false,configurable:false,enumerable:false,value:function(c,b){c=c.toString();b=Array.isArray(b)&&b.length>0?b.concat(Object.keys(this)):Object.keys(this);for(i in b){if(this[b[i]].indexOf(c)>=0){return b[i]+":"+c}}return c}},ambiguities:{writable:false,configurable:false,enumerable:false,value:function(){var c=this,d={},b=[];Object.keys(this).forEach(function(e){c[e].forEach(function(f){if(!d[f]){d[f]=[e+":"+f]}else{d[f].push(e+":"+f)}})});Object.keys(d).forEach(function(e){if(d[e].length>1){b=b.concat(d[e])}});return b}},shrink:{writable:false,configurable:false,enumerable:false,value:function(b){if(b=="rdf:type"){return"a"}var e=b.indexOf(":");var c=b.substring(0,e);var d=b.substring(++e);if(!this[c]){this[c]=[]}if(this[c].indexOf(d)==-1){this[c].push(d)}return d}}})})({owl:["allValuesFrom","annotatedProperty","annotatedSource","annotatedTarget","assertionProperty","backwardCompatibleWith","bottomDataProperty","bottomObjectProperty","cardinality","complementOf","datatypeComplementOf","deprecated","differentFrom","disjointUnionOf","disjointWith","distinctMembers","equivalentClass","equivalentProperty","hasKey","hasSelf","hasValue","imports","incompatibleWith","intersectionOf","inverseOf","maxCardinality","maxQualifiedCardinality","members","minCardinality","minQualifiedCardinality","onClass","onDataRange","onDatatype","oneOf","onProperties","onProperty","priorVersion","propertyChainAxiom","propertyDisjointWith","qualifiedCardinality","sameAs","someValuesFrom","sourceIndividual","targetIndividual","targetValue","topDataProperty","topObjectProperty","unionOf","versionInfo","versionIRI","withRestrictions"],rdf:["type","subject","predicate","object","value","first","rest"],rdfs:["subClassOf","subPropertyOf","comment","label","domain","range","seeAlso","isDefinedBy","member"],grddl:["namespaceTransformation","transformation","transformationProperty","result","profileTransformation"],wdrs:["text","issuedby","matchesregex","notmatchesregex","hasIRI","tag","notknownto","describedby","authenticate","validfrom","validuntil","logo","sha1sum","certified","certifiedby","supportedby","data_error","proc_error","error_code"],dc:["title","creator","subject","description","publisher","contributor","date","type","format","identifier","source","language","relation","coverage","rights","audience","alternative","tableOfContents","abstract","created","valid","available","issued","modified","extent","medium","isVersionOf","hasVersion","isReplacedBy","replaces","isRequiredBy","requires","isPartOf","hasPart","isReferencedBy","references","isFormatOf","hasFormat","conformsTo","spatial","temporal","mediator","dateAccepted","dateCopyrighted","dateSubmitted","educationLevel","accessRights","bibliographicCitation","license","rightsHolder","provenance","instructionalMethod","accrualMethod","accrualPeriodicity","accrualPolicy"],dc11:["title","creator","subject","description","publisher","contributor","date","type","format","identifier","source","language","relation","coverage","rights"],foaf:["mbox","mbox_sha1sum","gender","geekcode","dnaChecksum","sha1","based_near","title","nick","jabberID","aimChatID","skypeID","icqChatID","yahooChatID","msnChatID","name","firstName","lastName","givenName","givenname","surname","family_name","familyName","phone","homepage","weblog","openid","tipjar","plan","made","maker","img","depiction","depicts","thumbnail","myersBriggs","workplaceHomepage","workInfoHomepage","schoolHomepage","knows","interest","topic_interest","publications","currentProject","pastProject","fundedBy","logo","topic","primaryTopic","focus","isPrimaryTopicOf","page","theme","account","holdsAccount","accountServiceHomepage","accountName","member","membershipClass","birthday","age","status"],cc:["requires","prohibits","jurisdiction","useGuidelines","deprecatedOn","attributionName","license","attributionURL","morePermissions","permits","legalcode"],"void":["statItem","feature","subset","target","sparqlEndpoint","linkPredicate","exampleResource","vocabulary","subjectsTarget","objectsTarget","dataDump","uriLookupEndpoint","uriRegexPattern"],sioc:["about","account_of","addressed_to","administrator_of","attachment","avatar","container_of","content","creator_of","earlier_version","email","email_sha1","embeds_knowledge","feed","follows","function_of","has_administrator","has_container","has_creator","has_discussion","has_function","has_host","has_member","has_moderator","has_modifier","has_owner","has_parent","has_reply","has_scope","has_space","has_subscriber","has_usergroup","host_of","id","ip_address","last_activity_date","last_item_date","last_reply_date","later_version","latest_version","link","links_to","member_of","moderator_of","modifier_of","name","next_by_date","next_version","note","num_authors","num_items","num_replies","num_threads","num_views","owner_of","parent_of","previous_by_date","previous_version","related_to","reply_of","scope_of","sibling","space_of","subscriber_of","topic","usergroup_of"],sioca:["byproduct","creates","deletes","modifies","object","product","source","uses"],link:["listDocumentProperty","uri"],acl:["accessControl","accessTo","accessToClass","agent","agentClass","defaultForNew","mode"],skos:["inScheme","hasTopConcept","topConceptOf","prefLabel","altLabel","hiddenLabel","notation","note","changeNote","definition","editorialNote","example","historyNote","scopeNote","semanticRelation","broader","narrower","related","broaderTransitive","narrowerTransitive","member","memberList","mappingRelation","broadMatch","narrowMatch","relatedMatch","exactMatch","closeMatch"],wgs84:["lat","location","long","alt","lat_long"],org:["subOrganizationOf","transitiveSubOrganizationOf","hasSubOrganization ","purpose","hasUnit","unitOf","classification","identifier","linkedTo","memberOf","hasMember","reportsTo","member","organization","role","hasMembership","memberDuring","roleProperty","headOf","remuneration","siteAddress","hasSite","siteOf","hasPrimarySite","hasRegisteredSite","basedAt ","location","originalOrganization","changedBy","resultedFrom","resultingOrganization"],});js3=(function(a,b){api={curiemap:a,propertymap:b};api.RDFTriple=function(c,d,e){this.subject=c;this.property=d;this.object=e};api.RDFTriple.prototype={object:null,property:null,subject:null,toString:function(){return this.subject.toNT()+" "+this.property.toNT()+" "+this.object.toNT()+" ."},equals:function(c){return this.subject.equals(c.subject)&&this.property.equals(c.property)&&this.object.equals(c.object)}};api.Graph=function(c){this.length=0;this.graph=[];this.index={};if(Array.isArray(c)){this.importArray(c)}};api.Graph.prototype={length:null,graph:null,importArray:function(c){while(c.length>0){this.add(c.pop())}},get:function(c){return this.graph[c]},add:function(c){if(!this.index[c.subject.value]){this.index[c.subject.value]={}}if(!this.index[c.subject.value][c.property.value]){this.index[c.subject.value][c.property.value]=[]}if(this.index[c.subject.value][c.property.value].some(function(d){return d.equals(c.object)})){return}this.length++;this.index[c.subject.value][c.property.value].push(c.object);this.graph.push(c)},merge:function(d){var e=0,f=d.length;while(e<f){var c=e++;this.add(d.get(c))}},every:function(c){return this.graph.every(c)},some:function(c){return this.graph.some(c)},forEach:function(c){this.graph.forEach(c)},filter:function(c){return new js3.Graph(this.graph.filter(c))},apply:function(c){var d=new api.Graph(this.graph.filter(c));this.graph=d.graph;this.index=d.index;this.length=d.length},toArray:function(){return this.graph.slice()}};return api})(curiemap,propertymap);(function(d){var f=0;function c(j){return{writable:false,configurable:false,enumerable:false,value:j}}function e(j){return j<10?"0"+j:j}function h(k,j){if(k=="a"){return"rdf:type"}k=k.replace("$",":");if(k.indexOf(":")==-1){k=propertymap.resolve(k,j)}return k}d.encodeString=encodeString=function(r){var l="";var q=false;var o=0,n=r.length;while(o<n){var m=o++;if(!q){var j=r.charCodeAt(m);if(55296<=j&&j<=56319){var p=r.charCodeAt(m+1);j=(j-55296)*1024+(p-56320)+65536;q=true}if(j>1114111){throw new Error("Char out of range")}var k="00000000".concat((new Number(j)).toString(16).toUpperCase());if(j>=65536){l+="\\U"+k.slice(-8)}else{if(j>=127||j<=31){switch(j){case 9:l+="\\t";break;case 10:l+="\\n";break;case 13:l+="\\r";break;default:l+="\\u"+k.slice(-4);break}}else{switch(j){case 34:l+='\\"';break;case 92:l+="\\\\";break;default:l+=r.charAt(m);break}}}}else{q=!q}}return l};Object.defineProperties(Object.prototype,{equals:c(function(j){if(this.nodeType()!=j.nodeType()){return false}switch(this.nodeType()){case"PlainLiteral":if((this.language&&!j.language)||(!this.language&&j.language)){return false}if(this.language&&j.language){return this.language==j.language&&this==j}return this==j;case"TypedLiteral":return this.type.equals(j.type)&&this==j}return this.toNT()==j.toNT()}),ref:c(function(j){Object.defineProperties(this,{"@":c(j?j.resolve():"_:b"+(++f)),n3:c(function(k){var m=[],n=this,l=n["#"]||k;Object.keys(this).forEach(function(o){if(typeof n[o]=="function"){return}if(n[o]["@"]&&n[o]["@"].nodeType()=="IRI"){return m.push(h(o,l)+" "+n[o]["@"].n3())}if(!n[o].nodeType&&!n[o]["@"]){n[o].ref()}m.push(h(o,l)+" "+n[o].n3(l))});m=m.join(";\n  ");return j.nodeType()=="IRI"?this["@"].n3()+" "+m+" .":"[ "+m+" ]"}),toNT:c(function(k){return this.graphify(k).toArray().join("\n")}),graphify:c(function(k){var m=new d.Graph,p=this,n=p["#"]||k;function l(q,s,r){if(typeof r=="function"){return}if(!r.nodeType&&!r["@"]){r.ref()}if(r["@"]){m.add(new d.RDFTriple(q,h(s,n),r["@"]));m.merge(r.graphify())}else{if(!Array.isArray(r)){m.add(new d.RDFTriple(q,h(s,n),r))}else{if(Array.isArray(r)){if(!r.list){r.forEach(function(t){l(q,s,t)})}else{if(r.length==0){m.add(new d.RDFTriple(q,h(s,n),"rdf:nil".resolve()))}else{var o={}.ref();m.add(new d.RDFTriple(q,h(s,n),o["@"]));r.forEach(function(u,t){l(o["@"],"rdf:first".resolve(),u);var v={}.ref();m.add(new d.RDFTriple(o["@"],"rdf:rest".resolve(),(t==r.length-1)?"rdf:nil".resolve():v["@"]));o=v})}}}}}}Object.keys(this).forEach(function(o){l(p["@"],o,p[o])});return m}),"_#":c([]),"#":{configurable:false,enumerable:true,get:function(){return this["_#"]},set:function(k){if(Array.isArray(k)){for(i in k){if(this["_#"].indexOf(i[k])==-1){this["_#"].push(i[k])}}return}if(this["_#"].indexOf(k)==-1){this["_#"].push(k)}}},using:c(function(){this["#"]=Array.prototype.slice.call(arguments);return this}),alsoUsing:c(function(){var k=this;Array.prototype.slice.call(arguments).forEach(function(l){k["#"]=l});return this})});return this}),});Object.defineProperties(String.prototype,{tl:c(function(j){Object.defineProperty(this,"type",c(j.resolve()));Object.defineProperty(this,"language",c(null));return this}),l:c(function(j){Object.defineProperty(this,"type",c(null));Object.defineProperty(this,"language",c(j));return this}),resolve:c(function(){return curiemap.resolve(this)}),value:{configurable:false,enumerable:false,get:function(){return this.nodeType()=="IRI"?this.resolve():this}},nodeType:c(function(){if(this.type){return"TypedLiteral"}if(this.language||this.indexOf(" ")>=0||this.indexOf(":")==-1){return"PlainLiteral"}if(this.substr(0,2)=="_:"){return"BlankNode"}return"IRI"}),n3:c(function(){switch(this.nodeType()){case"PlainLiteral":return('"'+encodeString(this)+'"'+(this.language?"@"+this.language:"")).toString();case"IRI":return(this.resolve()==this)?"<"+encodeString(this.resolve())+">":this.toString();case"BlankNode":return this.toString();case"TypedLiteral":if(this.type.resolve()=="rdf:PlainLiteral".resolve()){return'"'+encodeString(this)+'"'}return'"'+encodeString(this)+'"^^'+this.type.n3()}}),toNT:c(function(){switch(this.nodeType()){case"PlainLiteral":return('"'+encodeString(this)+'"'+(this.language?"@"+this.language:"")).toString();case"IRI":return"<"+encodeString(this.resolve())+">";case"BlankNode":return this.toString();case"TypedLiteral":if(this.type.resolve()=="rdf:PlainLiteral".resolve()){return'"'+encodeString(this)+'"'}return'"'+encodeString(this)+'"^^'+this.type.n3()}}),toCanonical:c(function(){return this.n3()})});Object.defineProperties(Array.prototype,{list:c(false),toList:c(function(){this.list=true;return this}),nodeType:c("Collection"),n3:c(function(j){var k=[];this.forEach(function(l){if(typeof l=="function"){return}if(l["@"]&&l["@"].nodeType()=="IRI"){return k.push(l["@"].n3())}if(!l.nodeType&&!l["@"]){l.ref()}k.push(l.n3(j))});return this.list?"( "+k.join(" ")+" )":k.join(", ")}),remove:c(function(k){var j=this.indexOf(k);if(j==-1){return false}this.splice(j,1);return true})});Object.defineProperties(Boolean.prototype,{type:c("xsd:boolean".resolve()),value:{configurable:false,enumerable:false,get:function(){return this}},nodeType:c(function(){return"TypedLiteral"}),n3:c(function(){return this.valueOf()}),toNT:c(function(){return'"'+this.valueOf()+'"^^<'+this.type+">"}),toCanonical:c(function(){return this.toNT()})});Object.defineProperties(Date.prototype,{type:c("xsd:dateTime".resolve()),value:{configurable:false,enumerable:false,get:function(){return this}},nodeType:c(function(){return"TypedLiteral"}),n3:c(function(){return'"'+this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+'Z"^^<'+this.type+">"}),toNT:c(function(){return this.n3()}),toCanonical:c(function(){return this.n3()})});var a=new RegExp("^(-|\\+)?[0-9]+$","");var b=new RegExp("^(-|\\+)?(([0-9]+\\.[0-9]*[eE]{1}(-|\\+)?[0-9]+)|(\\.[0-9]+[eE]{1}(-|\\+)?[0-9]+)|([0-9]+[eE]{1}(-|\\+)?[0-9]+))$","");var g=new RegExp("^(-|\\+)?[0-9]*\\.[0-9]+?$","");Object.defineProperties(Number.prototype,{type:{configurable:false,enumerable:false,get:function(){if(this==Number.POSITIVE_INFINITY){return"xsd:double".resolve()}if(this==Number.NEGATIVE_INFINITY){return"xsd:double".resolve()}if(this==Number.NaN){return"xsd:double".resolve()}var j=this.toString();if(a.test(j)){return"xsd:integer".resolve()}if(g.test(j)){return"xsd:decimal".resolve()}if(b.test(j)){return"xsd:double".resolve()}}},value:{configurable:false,enumerable:false,get:function(){return this}},nodeType:c(function(){return"TypedLiteral"}),n3:c(function(){if(this==Number.POSITIVE_INFINITY){return'"INF"^^<'+"xsd:double".resolve()+">"}if(this==Number.NEGATIVE_INFINITY){return'"-INF"^^<'+"xsd:double".resolve()+">"}if(this==Number.NaN){return'"NaN"^^<'+"xsd:double".resolve()+">"}return this.toString()}),toNT:c(function(){if(this==Number.POSITIVE_INFINITY){return'"INF"^^<'+"xsd:double".resolve()+">"}if(this==Number.NEGATIVE_INFINITY){return'"-INF"^^<'+"xsd:double".resolve()+">"}if(this==Number.NaN){return'"NaN"^^<'+"xsd:double".resolve()+">"}return'"'+this.toString()+'"^^<'+this.type+">"}),toCanonical:c(function(){return this.nt()})});d.graphify=function(){var j=Array.prototype.slice.call(arguments),l=new d.Graph;function k(m){if(typeof m=="object"&&!m.nodeType){if(!m["@"]){m.ref()}l.merge(m.graphify())}}j.forEach(function(m){if(Array.isArray(m)){m.forEach(function(n){k(n)})}else{k(m)}});return l};d.Graph.prototype.objectify=function(){var m={},o=this;var k={};function n(p){if(!m[p.value]){m[p.value]={}.ref(p.value)}return m[p.value]}function l(p){switch(p.nodeType()){case"BlankNode":return k[p]?k[p].toList():n(p)}if(p.equals("rdf:nil")){return[].toList()}return p.value}var j=[];this.filter(d.filters.o("rdf:nil")).forEach(function(q){if(!q.property.equals("rdf:rest")){return}var p=[];while(true){j.push(q.subject);p.unshift(o.filter(d.filters.sp(q.subject,"rdf:first")).toArray().shift().object);var r=o.filter(d.filters.po("rdf:rest",q.subject));if(r.length==0){k[q.subject]=p.slice();return}q=r.toArray().shift()}});this.apply(function(p){return j.indexOf(p.subject)==-1});this.forEach(function(q){var r=n(q.subject.value),v,u;u=d.propertymap.shrink(v=d.curiemap.shrink(q.property.value));r.alsoUsing(v.substring(0,v.indexOf(":")));if(!r[u]){r[u]=l(q.object);return}if(!Array.isArray(r[u])){r[u]=[r[u]]}r[u].push(l(q.object))});return m};return d})(js3);rdfapi=(function(a){a.Hash=function(b){this.empty()};a.Hash.prototype={h:null,get:function(b){return this.h[b]},set:function(c,b){this.h[c]=b},empty:function(){this.h={}},exists:function(b){return this.h.hasOwnProperty(b)},keys:function(d){var c=[];d=!d;for(var b in this.h){if(d&&Object.prototype[b]){continue}c.push(b)}return c},remove:function(b){var c=this.get(b);delete this.h[b];return c},toArray:function(){var b=new Array;var c=this;this.keys().forEach(function(d){b.push(c.get(d))});return b},toString:function(){return JSON.stringify(this.h)}};a.IRI=function(b){this.value=b};a.IRI.SCHEME_MATCH=new RegExp("^[a-z0-9-.+]+:","i");a.IRI.prototype={nodeType:function(){return"IRI"},toNT:function(){return this.value.toNT()},defrag:function(){var b=this.value.indexOf("#");return(b<0)?this:new a.IRI(this.value.slice(0,b))},isAbsolute:function(){return this.scheme()!=null&&this.heirpart()!=null&&this.fragment()==null},toAbsolute:function(){if(this.scheme()==null&&this.heirpart()==null){throw new Error("IRI must have a scheme and a heirpart!")}return this.resolveReference(this.value).defrag()},authority:function(){var b=this.heirpart();if(b.substring(0,2)!="//"){return null}var d=b.slice(2);var c=d.indexOf("/");return c>=0?d.substring(0,c):d},fragment:function(){var b=this.value.indexOf("#");return(b<0)?null:this.value.slice(b)},heirpart:function(){var b=this.value;var c=b.indexOf("?");if(c>=0){b=b.substring(0,c)}else{c=b.indexOf("#");if(c>=0){b=b.substring(0,c)}}var d=this.scheme();if(d!=null){b=b.slice(1+d.length)}return b},host:function(){var b=this.authority();var c=b.indexOf("@");if(c>=0){b=b.slice(++c)}if(b.indexOf("[")==0){c=b.indexOf("]");if(c>0){return b.substring(0,c)}}c=b.lastIndexOf(":");return c>=0?b.substring(0,c):b},path:function(){var b=this.authority();if(b==null){return this.heirpart()}return this.heirpart().slice(b.length+2)},port:function(){var b=this.authority();var c=b.indexOf("@");if(c>=0){b=b.slice(++c)}if(b.indexOf("[")==0){c=b.indexOf("]");if(c>0){return b.substring(0,c)}}c=b.lastIndexOf(":");if(c<0){return null}b=b.slice(++c);return b.length==0?null:b},query:function(){var c=this.value.indexOf("?");if(c<0){return null}var b=this.value.indexOf("#");if(b<0){return this.value.slice(c)}return this.value.substring(c,b)},removeDotSegments:function(c){var b="";var d=0;while(c.length>0){if(c.substr(0,3)=="../"||c.substr(0,2)=="./"){c=c.slice(c.indexOf("/"))}else{if(c=="/."){c="/"}else{if(c.substr(0,3)=="/./"){c=c.slice(2)}else{if(c.substr(0,4)=="/../"||c=="/.."){(c=="/..")?c="/":c=c.slice(3);d=b.lastIndexOf("/");(d>=0)?b=b.substring(0,d):b=""}else{if(c.substr(0,2)==".."||c.substr(0,1)=="."){c=c.slice(c.indexOf("."));d=c.indexOf(".");if(d>=0){c=c.slice(d)}}else{if(c.substr(0,1)=="/"){b+="/";c=c.slice(1)}d=c.indexOf("/");if(d<0){b+=c;c=""}else{b+=c.substring(0,d);c=c.slice(d)}}}}}}}return b},resolveReference:function(d){var b;if(typeof d=="string"){b=new a.IRI(d)}else{if(d.nodeType&&d.nodeType()=="IRI"){b=d}else{throw new Error("Expected IRI or String")}}var c={scheme:"",authority:"",path:"",query:"",fragment:""};var e="";if(b.scheme()!=null){c.scheme=b.scheme();e=b.authority();c.authority+=e!=null?"//"+e:"";c.path=this.removeDotSegments(b.path());e=b.query();c.query+=e!=null?e:""}else{e=b.authority();if(e!=null){c.authority=e!=null?"//"+e:"";c.path=this.removeDotSegments(b.path());e=b.query();c.query+=e!=null?e:""}else{e=b.path();if(e==""||e==null){c.path=this.path();e=b.query();if(e!=null){c.query+=e}else{e=this.query();c.query+=e!=null?e:""}}else{if(e.substring(0,1)=="/"){c.path=this.removeDotSegments(e)}else{if(this.path()!=null){var f=this.path().lastIndexOf("/");if(f>=0){c.path=this.path().substring(0,++f)}c.path+=b.path()}else{c.path="/"+e}c.path=this.removeDotSegments(c.path)}e=b.query();c.query+=e!=null?e:""}e=this.authority();c.authority=e!=null?"//"+e:""}c.scheme=this.scheme()}e=b.fragment();c.fragment=e!=null?e:"";return new a.IRI(c.scheme+":"+c.authority+c.path+c.query+c.fragment)},scheme:function(){var b=this.value.match(a.IRI.SCHEME_MATCH);return(b==null)?null:b.shift().slice(0,-1)},userinfo:function(){var c=this.authority();var b=c.indexOf("@");return(b<0)?null:c.substring(0,b)}};a.Context=function(){this.converterMap=new a.Hash;this._loadDefaultTypeConverters()};a.Context.prototype={base:null,converterMap:null,createBlankNode:function(){return{}.ref()["@"]},createIRI:function(c){var b=new a.IRI(c);if(b.scheme()==null&&this.base!=null){b=this.base.resolveReference(b)}return b},createPlainLiteral:function(b,c){return b.l(c)},createTypedLiteral:function(c,b){return this.convertTypedLiteral(c.tl(b))},createTriple:function(b,c,d){return new a.RDFTriple(b,c,d)},createGraph:function(b){return new a.Graph(b)},getMapping:function(){var b=new a.Hash;b.h=a.curiemap;return b},setMapping:function(b,c){if(b.slice(-1)==":"){b=b.slice(0,-1)}a.curiemap[b]=c;return function(d){return c+d}},resolveCurie:function(b){return a.curiemap.resolve(b)},convertTypedLiteral:function(b){var c=this.converterMap.get(b.type.resolve());if(c!=null){try{return c(b,b.type)}catch(d){}}return b},registerTypeConversion:function(e,d){var c=e.resolve();var b=this.converterMap.get(c);this.converterMap.remove(c);if(d!=null){this.converterMap.set(c,d)}return b?b:null},_loadDefaultTypeConverters:function(){var e=function(g,f){return new String(g)};this.registerTypeConversion("xsd:string",e);var c=function(g,f){return(new Boolean(g)).valueOf()};this.registerTypeConversion("xsd:boolean",c);var d=function(g,f){return(new Number(g)).valueOf()};this.registerTypeConversion("xsd:float",d);this.registerTypeConversion("xsd:integer",d);this.registerTypeConversion("xsd:long",d);this.registerTypeConversion("xsd:double",d);this.registerTypeConversion("xsd:decimal",d);this.registerTypeConversion("xsd:nonPositiveInteger",d);this.registerTypeConversion("xsd:nonNegativeInteger",d);this.registerTypeConversion("xsd:negativeInteger",d);this.registerTypeConversion("xsd:int",d);this.registerTypeConversion("xsd:unsignedLong",d);this.registerTypeConversion("xsd:positiveInteger",d);this.registerTypeConversion("xsd:short",d);this.registerTypeConversion("xsd:unsignedInt",d);this.registerTypeConversion("xsd:byte",d);this.registerTypeConversion("xsd:unsignedShort",d);this.registerTypeConversion("xsd:unsignedByte",d);var b=function(g,f){return new Date(g)};this.registerTypeConversion("xsd:dateTime",b)}};a.Data=function(){this.graph=new a.Graph;this.context=new a.Context};a.Data.prototype={context:null,graph:null,createContext:function(){return new a.Context}};a.data=new a.Data;return a})(js3);(function(a){if(!a.parsers){a.parsers={}}a.parsers.u8=new RegExp("\\\\U([A-F0-9]{8})","g");a.parsers.u4=new RegExp("\\\\u([A-F0-9]{4})","g");a.parsers.hexToChar=function(c){var b="";var d=parseInt(c,16);if(d<=65535){b+=String.fromCharCode(d)}else{if(d<=1114111){d-=65536;b+=String.fromCharCode(55296+(d>>10),56320+(d&1023))}else{throw new Error("code point isn't known: "+d)}}return b};a.parsers.decodeString=function(b){b=b.replace(a.parsers.u8,function(c,d){return a.parsers.hexToChar(d)});b=b.replace(a.parsers.u4,function(c,d){return a.parsers.hexToChar(d)});b=b.replace(new RegExp("\\\\t","g"),"\t");b=b.replace(new RegExp("\\\\n","g"),"\n");b=b.replace(new RegExp("\\\\r","g"),"\r");b=b.replace(new RegExp('\\\\"',"g"),'"');b=b.replace(new RegExp("\\\\\\\\","g"),"\\");return b};a.parsers.NTriples=function(b){this.context=b;this.bnHash=new a.Hash};a.parsers.NTriples.isComment=new RegExp("^[ \t]*#","");a.parsers.NTriples.isEmptyLine=new RegExp("^[ \t]*$","");a.parsers.NTriples.initialWhitespace=new RegExp("^[ \t]+","");a.parsers.NTriples.trailingWhitespace=new RegExp("[. \t]+$","");a.parsers.NTriples.whitespace=new RegExp("[ \t]+","");a.parsers.NTriples.objectMatcher=new RegExp("^([^ \t]+)[ \t]+([^ \t]+)[ \t]+(.*)$","");a.parsers.NTriples.trailingLanguage=new RegExp("@([a-z]+[-a-z0-9]+)$","");a.parsers.NTriples.typedLiteralMatcher=new RegExp('^"(.*)"(.{2})<([^>]+)>$',"");a.parsers.NTriples.eolMatcher=new RegExp("\r\n|\n|\r","g");a.parsers.NTriples.prototype={context:null,quick:null,bnHash:null,graph:null,filter:null,processor:null,parse:function(e,b,c,d){this.graph=d==null?this.context.createGraph():d;this.filter=c;this.quick=false;this.internalParse(e);if(b!=null){b(this.graph)}return true},process:function(d,c,b){this.processor=c;this.filter=b;this.quick=true;return this.internalParse(d)},getBlankNode:function(c){if(this.bnHash.exists(c)){return this.bnHash.get(c)}var b=this.context.createBlankNode();this.bnHash.set(c,b);return b},internalParse:function(e){var d=new String(e);var b=d.split(a.parsers.NTriples.eolMatcher);var c=this;b.forEach(function(g,f,h){c.readLine(g,f,h)});return true},negotiateLiteral:function(b){if(b.slice(-1)=='"'){return this.context.createPlainLiteral(a.parsers.decodeString(b.slice(1,-1)))}var d=b.match(a.parsers.NTriples.trailingLanguage);if(d!=null){return this.context.createPlainLiteral(a.parsers.decodeString(b.slice(1,-1-d.shift().length)),d.pop())}var c=b.match(a.parsers.NTriples.typedLiteralMatcher);return this.context.createTypedLiteral(a.parsers.decodeString(c[1]),c.pop())},readLine:function(k,e,f){if(a.parsers.NTriples.isComment.test(k)||a.parsers.NTriples.isEmptyLine.test(k)){return}k=k.replace(a.parsers.NTriples.initialWhitespace,"").replace(a.parsers.NTriples.trailingWhitespace,"");var d=k.split(a.parsers.NTriples.whitespace,2);d.push(k.replace(a.parsers.NTriples.objectMatcher,"$3"));var j;if(d[0].charAt(0)=="<"){j=this.context.createIRI(a.parsers.decodeString(d[0].slice(1,-1)))}else{j=this.getBlankNode(d[0].slice(2))}d.shift();var b=this.context.createIRI(d.shift().slice(1,-1));var c;switch(d[0].charAt(0)){case"<":c=this.context.createIRI(a.parsers.decodeString(d[0].slice(1,-1)));break;case"_":c=this.getBlankNode(d[0].slice(2));break;default:c=this.negotiateLiteral(d[0]);break}var h=this.context.createTriple(j,b,c);var g=true;if(this.filter!=null){g=this.filter(h,null,null)}if(!g){return}this.quick?this.processor(h):this.graph.add(h)}};a.parsers.Turtle=function(b){this.context=b;this.bnHash=new a.Hash};a.parsers.Turtle.isWhitespace=new RegExp("^[ \t\r\n#]+","");a.parsers.Turtle.initialWhitespace=new RegExp("^[ \t\r\n]+","");a.parsers.Turtle.initialComment=new RegExp("^#[^\r\n]*","");a.parsers.Turtle.simpleToken=new RegExp("^[^ \t\r\n]+","");a.parsers.Turtle.simpleObjectToken=new RegExp("^[^ \t\r\n;,]+","");a.parsers.Turtle.tokenInteger=new RegExp("^(-|\\+)?[0-9]+$","");a.parsers.Turtle.tokenDouble=new RegExp("^(-|\\+)?(([0-9]+\\.[0-9]*[eE]{1}(-|\\+)?[0-9]+)|(\\.[0-9]+[eE]{1}(-|\\+)?[0-9]+)|([0-9]+[eE]{1}(-|\\+)?[0-9]+))$","");a.parsers.Turtle.tokenDecimal=new RegExp("^(-|\\+)?[0-9]*\\.[0-9]+?$","");a.parsers.Turtle.prototype={bnHash:null,context:null,filter:null,processor:null,quick:null,graph:null,parse:function(e,b,c,d){this.graph=d==null?this.context.createGraph():d;this.filter=c;this.quick=false;this.parseStatements(new String(e));if(b!=null){b(this.graph)}return true},process:function(d,c,b){this.processor=c;this.filter=b;this.quick=true;return this.parseStatements(new String(d))},t:function(){return{o:null}},parseStatements:function(b){b=b.toString();while(b.length>0){b=this.skipWS(b);if(b.length==0){return true}b.charAt(0)=="@"?b=this.consumeDirective(b):b=this.consumeStatement(b);this.expect(b,".");b=this.skipWS(b.slice(1))}return true},add:function(c){var b=true;if(this.filter!=null){b=this.filter(c,null,null)}if(!b){return}this.quick?this.processor(c):this.graph.add(c)},consumeBlankNode:function(c,b){b.o=this.context.createBlankNode();c=this.skipWS(c.slice(1));if(c.charAt(0)=="]"){return c.slice(1)}c=this.skipWS(this.consumePredicateObjectList(c,b));this.expect(c,"]");return this.skipWS(c.slice(1))},consumeCollection:function(f,e){e.o=this.context.createBlankNode();var c=this.t();c.o=e.o;f=this.skipWS(f.slice(1));var b=f.charAt(0)!=")";if(!b){e.o=this.context.resolveCurie("rdf:nil")}while(b){var g=this.t();switch(f.charAt(0)){case"[":f=this.consumeBlankNode(f,g);break;case"_":f=this.consumeKnownBlankNode(f,g);break;case"(":f=this.consumeCollection(f,g);break;case"<":f=this.consumeURI(f,g);break;case'"':f=this.consumeLiteral(f,g);break;default:var d=f.match(a.parsers.Turtle.simpleObjectToken).shift();if(d.charAt(d.length-1)==")"){d=d.substring(0,d.length-1)}if(d=="false"||d=="true"){g.o=this.context.createTypedLiteral(d,"xsd:boolean")}else{if(d.indexOf(":")>-1){g.o=this.context.resolveCurie(d)}else{if(a.parsers.Turtle.tokenInteger.test(d)){g.o=this.context.createTypedLiteral(d,"xsd:integer")}else{if(a.parsers.Turtle.tokenDouble.test(d)){g.o=this.context.createTypedLiteral(d,"xsd:double")}else{if(a.parsers.Turtle.tokenDecimal.test(d)){g.o=this.context.createTypedLiteral(d,"xsd:decimal")}else{throw new Error("unrecognised token: "+d)}}}}}f=f.slice(d.length);break}this.add(this.context.createTriple(c.o,this.context.resolveCurie("rdf:first"),g.o));f=this.skipWS(f);b=f.charAt(0)!=")";if(b){this.add(this.context.createTriple(c.o,this.context.resolveCurie("rdf:rest"),c.o=this.context.createBlankNode()))}else{this.add(this.context.createTriple(c.o,this.context.resolveCurie("rdf:rest"),this.context.resolveCurie("rdf:nil")))}}return this.skipWS(f.slice(1))},consumeDirective:function(b){var d=0;if(b.substring(1,7)=="prefix"){b=this.skipWS(b.slice(7));d=b.indexOf(":");var c=b.substring(0,d);b=this.skipWS(b.slice(++d));this.expect(b,"<");this.context.setMapping(c,a.parsers.decodeString(b.substring(1,d=b.indexOf(">"))));b=this.skipWS(b.slice(++d))}else{if(b.substring(1,5)=="base"){b=this.skipWS(b.slice(5));this.expect(b,"<");this.context.base=this.context.createIRI(a.parsers.decodeString(b.substring(1,d=b.indexOf(">"))));b=this.skipWS(b.slice(++d))}else{throw new Error("Unknown directive: "+b.substring(0,50))}}return b},consumeKnownBlankNode:function(c,b){this.expect(c,"_:");var d=c.slice(2).match(a.parsers.Turtle.simpleToken).shift();b.o=this.getBlankNode(d);return c.slice(d.length+2)},consumeLiteral:function(e,g){var f="";var d=true;var b=0;if(e.substring(0,3)=='"""'){b=3;while(d){b=e.indexOf('"""',b);if(d=e.charAt(b-1)=="\\"){b++}}f=e.substring(3,b);e=e.slice(f.length+6)}else{while(d){b=e.indexOf('"',b+1);d=e.charAt(b-1)=="\\"}f=e.substring(1,b);e=e.slice(f.length+2)}f=a.parsers.decodeString(f);switch(e.charAt(0)){case"@":var c=e.match(a.parsers.Turtle.simpleObjectToken).shift();g.o=this.context.createPlainLiteral(f,c.slice(1));e=e.slice(c.length);break;case"^":var c=e.match(a.parsers.Turtle.simpleObjectToken).shift().slice(2);if(c.charAt(0)=="<"){g.o=this.context.createTypedLiteral(f,c.substring(1,c.length-1))}else{g.o=this.context.createTypedLiteral(f,c)}e=e.slice(c.length+2);break;default:g.o=this.context.createPlainLiteral(f);break}return e},consumeObjectList:function(e,d,f){var b=true;while(b){var g=this.t();switch(e.charAt(0)){case"[":e=this.consumeBlankNode(e,g);break;case"_":e=this.consumeKnownBlankNode(e,g);break;case"(":e=this.consumeCollection(e,g);break;case"<":e=this.consumeURI(e,g);break;case'"':e=this.consumeLiteral(e,g);break;default:var c=e.match(a.parsers.Turtle.simpleObjectToken).shift();if(c.charAt(c.length-1)=="."){c=c.substring(0,c.length-1)}if(c=="false"||c=="true"){g.o=this.context.createTypedLiteral(c,"xsd:boolean")}else{if(c.indexOf(":")>-1){g.o=this.context.resolveCurie(c)}else{if(a.parsers.Turtle.tokenInteger.test(c)){g.o=this.context.createTypedLiteral(c,"xsd:integer")}else{if(a.parsers.Turtle.tokenDouble.test(c)){g.o=this.context.createTypedLiteral(c,"xsd:double")}else{if(a.parsers.Turtle.tokenDecimal.test(c)){g.o=this.context.createTypedLiteral(c,"xsd:decimal")}else{throw new Error("unrecognised token: "+c)}}}}}e=e.slice(c.length);break}this.add(this.context.createTriple(d.o,f,g.o));e=this.skipWS(e);b=e.charAt(0)==",";if(b){e=this.skipWS(e.slice(1))}}return e},consumePredicateObjectList:function(e,d){var c=true;while(c){var b=e.match(a.parsers.Turtle.simpleToken).shift();var f=null;if(b=="a"){f=this.context.resolveCurie("rdf:type")}else{switch(b.charAt(0)){case"<":f=this.context.createIRI(a.parsers.decodeString(b.substring(1,b.indexOf(">"))));break;default:f=this.context.resolveCurie(b);break}}e=this.skipWS(e.slice(b.length));e=this.consumeObjectList(e,d,f);c=e.charAt(0)==";";if(c){e=this.skipWS(e.slice(1))}}return e},consumeQName:function(c,b){var d=c.match(a.parsers.Turtle.simpleToken).shift();b.o=this.context.resolveCurie(d);return c.slice(d.length)},consumeStatement:function(c){var b=this.t();switch(c.charAt(0)){case"[":c=this.consumeBlankNode(c,b);if(c.charAt(0)=="."){return c}break;case"_":c=this.consumeKnownBlankNode(c,b);break;case"(":c=this.consumeCollection(c,b);break;case"<":c=this.consumeURI(c,b);break;default:c=this.consumeQName(c,b);break}c=this.consumePredicateObjectList(this.skipWS(c),b);return c},consumeURI:function(c,b){this.expect(c,"<");var d=0;b.o=this.context.createIRI(a.parsers.decodeString(c.substring(1,d=c.indexOf(">"))));return c.slice(++d)},expect:function(c,b){if(c.substring(0,b.length)==b){return}throw new Error("Expected token: "+b+" at "+c.substring(0,50))},getBlankNode:function(c){if(this.bnHash.exists(c)){return this.bnHash.get(c)}var b=this.context.createBlankNode();this.bnHash.set(c,b);return b},skipWS:function(b){while(a.parsers.Turtle.isWhitespace.test(b.charAt(0))){b=b.replace(a.parsers.Turtle.initialWhitespace,"");if(b.charAt(0)=="#"){b=b.replace(a.parsers.Turtle.initialComment,"")}}return b}};a.parsers.RDFXML=function(b){this.context=b;this.bnHash=new a.Hash};a.parsers.RDFXML.NS_RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#";a.parsers.RDFXML.NS_RDFS="http://www.w3.org/2000/01/rdf-schema#";a.parsers.RDFXML.RDF_TYPE=new a.IRI(a.parsers.RDFXML.NS_RDF+"type");a.parsers.RDFXML.RDF_RDF=new a.IRI(a.parsers.RDFXML.NS_RDF+"RDF");a.parsers.RDFXML.RDF_DESCRIPTION=new a.IRI(a.parsers.RDFXML.NS_RDF+"Description");a.parsers.RDFXML.RDF_STATEMENT=new a.IRI(a.parsers.RDFXML.NS_RDF+"Statement");a.parsers.RDFXML.RDF_SUBJECT=new a.IRI(a.parsers.RDFXML.NS_RDF+"subject");a.parsers.RDFXML.RDF_PREDICATE=new a.IRI(a.parsers.RDFXML.NS_RDF+"predicate");a.parsers.RDFXML.RDF_OBJECT=new a.IRI(a.parsers.RDFXML.NS_RDF+"object");a.parsers.RDFXML.RDF_LI=new a.IRI(a.parsers.RDFXML.NS_RDF+"li");a.parsers.RDFXML.RDF_FIRST=new a.IRI(a.parsers.RDFXML.NS_RDF+"first");a.parsers.RDFXML.RDF_REST=new a.IRI(a.parsers.RDFXML.NS_RDF+"rest");a.parsers.RDFXML.RDF_NIL=new a.IRI(a.parsers.RDFXML.NS_RDF+"nil");a.parsers.RDFXML.prototype={base:null,bnHash:null,context:null,filter:null,processor:null,quick:null,graph:null,parse:function(e,b,c,d){this.graph=d==null?new a.Graph:d;this.filter=c;this.quick=false;this.parseStatements(e);if(b!=null){b(this.graph)}return},process:function(d,c,b){this.processor=c;this.filter=b;this.quick=true;return this.parseStatements(d)},add:function(c){var b=true;if(this.filter!=null){b=this.filter(c,null,null)}if(!b){return}this.quick?this.processor(c):this.graph.add(c)},addArc:function(c,b){if(b.equals(a.parsers.RDFXML.RDF_LI)){b=this.context.resolveCurie("rdf:_"+c.parent.listIndex++)}this.addSymbol(c,2,b.toString())},addBNode:function(c,b){b!=null?c.node=this.getBlankNode(b):c.node=this.context.createBlankNode();c.nodeType=1;if(this.isTripleToLoad(c)){this.addFrame(c)}},addCollection:function(b){b.collection=true;this.addBNode(b)},addFrame:function(c){this.add(this.createTriple(c.parent.parent.node,c.parent.node,c.node));if(c.rdfid!=null||c.parent.rdfid!=null){if(c.parent.rdfid!=null&&c.rdfid==null){c.rdfid=c.parent.rdfid}var b=c.base.resolveReference("#".concat(c.rdfid));this.add(this.createTriple(b,a.parsers.RDFXML.RDF_TYPE,a.parsers.RDFXML.RDF_STATEMENT));this.add(this.createTriple(b,a.parsers.RDFXML.RDF_SUBJECT,c.parent.parent.node));this.add(this.createTriple(b,a.parsers.RDFXML.RDF_PREDICATE,c.parent.node));this.add(this.createTriple(b,a.parsers.RDFXML.RDF_OBJECT,c.node))}},addLiteral:function(c,b){c.nodeType=1;if(c.parent.datatype!=null){c.node=this.context.createTypedLiteral(b==null?c.element.nodeValue:b,c.parent.datatype)}else{c.node=this.context.createPlainLiteral(b==null?c.element.nodeValue:b,c.lang)}if(this.isTripleToLoad(c)){this.addFrame(c)}},addNode:function(c,b){this.addSymbol(c,1,b);if(this.isTripleToLoad(c)){this.addFrame(c)}},addSymbol:function(d,b,c){d.node=d.base.resolveReference(c);d.nodeType=b},buildFrame:function(g,f){var j={parent:g,element:f,lastChild:0,base:null,lang:null,node:null,nodeType:null,listIndex:1,rdfid:null,datatype:null,collection:false};if(g!=null){j.base=g.base;j.lang=g.lang}if(f==null||f.nodeType==3||f.nodeType==4){return j}var h=f.getAttributeNode("xml:base");if(h!=null){j.base=this.context.createIRI(h.nodeValue);f.removeAttribute("xml:base")}h=f.getAttributeNode("xml:lang");if(h!=null){j.lang=h.nodeValue;f.removeAttribute("xml:lang")}var b=f.attributes;var e=b.length-1;while(e>-1){if(b.item(e).nodeName.substring(0,3)=="xml"){if(b.item(e).name.substring(0,6)=="xmlns:"){var k=b.item(e).nodeValue;if(this.base!=null){k=this.base.resolveReference(k).toString()}this.context.setMapping(b.item(e).name.slice(6),k)}f.removeAttributeNode(b.item(e))}e--}return j},createTriple:function(b,c,d){return this.context.createTriple(b,c,d)},getBlankNode:function(c){if(this.bnHash.exists(c)){return this.bnHash.get(c)}var b=this.context.createBlankNode();this.bnHash.set(c,b);return b},isTripleToLoad:function(b){return b.parent!=null&&b.parent.parent!=null&&b.nodeType==1&&b.parent.nodeType==2&&b.parent.parent.nodeType==1},parseDOM:function(d){var s=true;while(d.parent!=null){var q=d.element;if(q.nodeType==3||q.nodeType==4){this.addLiteral(d)}else{if(!a.parsers.RDFXML.RDF_RDF.equals(this.resolveNamespaceURI(q))){if(d.parent!=null&&d.parent.collection){d.parent.listIndex++;this.addArc(d,a.parsers.RDFXML.RDF_FIRST);d=this.buildFrame(d,d.element);d.parent.element=null}if(d.parent==null||d.parent.nodeType==null||d.parent.nodeType==2){var j=q.getAttributeNodeNS(a.parsers.RDFXML.NS_RDF,"about");var h=q.getAttributeNodeNS(a.parsers.RDFXML.NS_RDF,"ID");if(j!=null&&h!=null){throw new Error("RDFParser: "+q.nodeName+" has both rdf:id and rdf:about, only one may be specified")}if(j==null&&h!=null){this.addNode(d,"#"+h.nodeValue);q.removeAttributeNode(h)}else{if(j==null&&h==null){if((j=q.getAttributeNodeNS(a.parsers.RDFXML.NS_RDF,"nodeID"))!=null){this.addBNode(d,j.nodeValue);q.removeAttributeNode(j)}else{this.addBNode(d)}}else{this.addNode(d,j.nodeValue);q.removeAttributeNode(j)}}j=q.getAttributeNodeNS(a.parsers.RDFXML.NS_RDF,"type");if(!this.resolveNamespaceURI(q).equals(a.parsers.RDFXML.RDF_DESCRIPTION)){j={nodeValue:this.resolveNamespaceURI(q)}}if(j!=null){this.add(this.createTriple(d.node,a.parsers.RDFXML.RDF_TYPE,d.base.resolveReference(j.nodeValue)));if(j.nodeName!=null){q.removeAttributeNode(j)}}var o=q.attributes.length-1;while(o>-1){this.add(this.createTriple(d.node,this.resolveNamespaceURI(q.attributes.item(o)),this.context.createPlainLiteral(q.attributes.item(o).nodeValue,d.lang)));o--}}else{this.addArc(d,this.resolveNamespaceURI(q));var h=q.getAttributeNodeNS(a.parsers.RDFXML.NS_RDF,"ID");if(h!=null){d.rdfid=h.nodeValue;q.removeAttributeNode(h)}var l=q.getAttributeNodeNS(a.parsers.RDFXML.NS_RDF,"datatype");if(l!=null){d.datatype=l.nodeValue;q.removeAttributeNode(l)}var r=q.getAttributeNodeNS(a.parsers.RDFXML.NS_RDF,"parseType");if(r!=null){switch(r.nodeValue){case"Literal":d.datatype=a.parsers.RDFXML.NS_RDF+"XMLLiteral";d=this.buildFrame(d);var m="";var t=0;while(t<q.childNodes.length){var u=q.childNodes.item(t++);if(u.nodeType==3){m+=u.nodeValue}else{m+=(new XMLSerializer).serializeToString(q.firstElementChild)}}this.addLiteral(d,m);s=false;break;case"Resource":d=this.buildFrame(d,d.element);d.parent.element=null;this.addBNode(d);break;case"Collection":d=this.buildFrame(d,d.element);d.parent.element=null;this.addCollection(d);break}q.removeAttributeNode(r)}if(q.attributes.length!=0){var o=q.getAttributeNodeNS(a.parsers.RDFXML.NS_RDF,"resource");r=q.getAttributeNodeNS(a.parsers.RDFXML.NS_RDF,"nodeID");d=this.buildFrame(d);if(o!=null){this.addNode(d,o.nodeValue);q.removeAttributeNode(o)}else{if(r!=null){this.addBNode(d,r.nodeValue);q.removeAttributeNode(r)}else{this.addBNode(d)}}var k=q.attributes.length-1;while(k>-1){var g=this.buildFrame(d);o=q.attributes.item(k);this.addArc(g,this.resolveNamespaceURI(o));if(this.resolveNamespaceURI(o).equals(a.parsers.RDFXML.RDF_TYPE)){this.addNode(this.buildFrame(g),o.nodeValue)}else{this.addLiteral(this.buildFrame(g),o.nodeValue)}k--}}else{if(q.childNodes.length==0){this.addLiteral(this.buildFrame(d),"")}}}}}q=d.element;while(d.parent!=null){var p=d;while(q==null){d=d.parent;q=d.element}var r=q.childNodes.item(d.lastChild);if(r==null||!s){if(d.collection){this.add(this.createTriple(d.node,a.parsers.RDFXML.RDF_REST,a.parsers.RDFXML.RDF_NIL))}if((d=d.parent)==null){break}q=d.element;s=true}else{if(r.nodeType!=1&&r.nodeType!=3&&r.nodeType!=4||(r.nodeType==3||r.nodeType==4)&&q.childNodes.length!=1){d.lastChild++}else{if(d.collection&&d.listIndex>1){var b=this.context.createBlankNode();this.add(this.createTriple(d.node,a.parsers.RDFXML.RDF_REST,b));p.node=b}d.lastChild++;d=this.buildFrame(p,q.childNodes.item(d.lastChild-1));break}}}}},parseStatements:function(c){this.base=this.context.base;var b=this.buildFrame(null,null);b.base=this.base;this.parseDOM(this.buildFrame(b,c.documentElement));return true},resolveNamespaceURI:function(b){if(b.namespaceURI==null){throw new Error("RDF/XML syntax error: No namespace for "+b.localName+" in "+this.base)}return this.context.createIRI(b.namespaceURI+b.localName)}};a.parseNT=function(e,b,c,d){return new a.parsers.NTriples(a.data.context).parse(e,b,c,d)};a.processNT=function(d,b,c){return new a.parsers.NTriples(a.data.context).process(d,b,c)};a.parseTurtle=function(e,b,c,d){return new a.parsers.Turtle(a.data.context).parse(e,b,c,d)};a.processTurtle=function(d,b,c){return new a.parsers.Turtle(a.data.context).process(d,b,c)};a.parseRDFXML=function(e,b,c,d){return new a.parsers.RDFXML(a.data.context).parse(e,b,c,d)};a.processRDFXML=function(d,b,c){return new a.parsers.RDFXML(a.data.context).process(d,b,c)}})(rdfapi);(function(a){if(!a.serializers){a.serializers={}}a.serializers.NTriples=function(b){};a.serializers.NTriples.prototype={serialize:function(b){return b.toArray().join("\n")}};a.serializers.Turtle=function(b){this.context=b;this.createPrefixMap()};a.serializers.Turtle.NS_RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#";a.serializers.Turtle.RDF_TYPE=new a.IRI(a.serializers.Turtle.NS_RDF+"type");a.serializers.Turtle.RDF_RDF=new a.IRI(a.serializers.Turtle.NS_RDF+"RDF");a.serializers.Turtle.RDF_FIRST=new a.IRI(a.serializers.Turtle.NS_RDF+"first");a.serializers.Turtle.RDF_REST=new a.IRI(a.serializers.Turtle.NS_RDF+"rest");a.serializers.Turtle.RDF_NIL=new a.IRI(a.serializers.Turtle.NS_RDF+"nil");a.serializers.Turtle.prototype={context:null,index:null,lists:null,prefixMap:null,usedPrefixes:null,nonAnonBNodes:null,skipSubjects:null,serialize:function(c){this.initiate();c=this.suckLists(c);var b=this;c.forEach(function(e,d,f){b.addTripleToIndex(e,d,f)});return this.render()},addTripleToIndex:function(d,c,e){if(d.object.nodeType()=="BlankNode"){this.nonAnonBNodes.set(d.object.toString(),this.nonAnonBNodes.exists(d.object.toString())?this.nonAnonBNodes.get(d.object.toString())+1:1)}var b=this.shrink(d.subject);var f=this.shrink(d.property,true);if(!this.index.exists(b)){this.index.set(b,new a.Hash)}if(!this.index.get(b).exists(f)){this.index.get(b).set(f,new Array)}this.index.get(b).get(f).push(d.object)},anonBNode:function(c,b){return this.propertyObjectChain(this.index.get(c),b)},createPrefixMap:function(){var b=this.context.getMapping();var c=this.prefixMap=new a.Hash;b.keys().forEach(function(e,f,d){c.set(b.get(e).toString(),e.concat(":"))})},initiate:function(){this.index=new a.Hash;this.usedPrefixes=new Array;this.nonAnonBNodes=new a.Hash;this.skipSubjects=new Array;this.lists=new a.Hash},output:function(b){if(b.nodeType()=="IRI"){return this.shrink(b)}if(b.nodeType()=="TypedLiteral"){if(b.type.equals(this.context.resolveCurie("xsd:integer"))){return b.value}if(b.type.equals(this.context.resolveCurie("xsd:double"))){return b.value}if(b.type.equals(this.context.resolveCurie("xsd:decimal"))){return b.value}if(b.type.equals(this.context.resolveCurie("xsd:boolean"))){return b.value}return'"'+b.value+'"^^'+this.shrink(b.type)}return b.toNT()},propertyObjectChain:function(c,b){if(!c){return}if(b==null){b=2}var e="";var d=this;var f=c.keys();f.sort();if(f.indexOf("a")>=0){f.remove("a");f.unshift("a")}f.forEach(function(h,j,g){e=e+(j>0?(new Array(b+1)).join(" "):"")+h+" ";c.get(h).forEach(function(n,m,k){var l="";if(k.length>2){l="\n"+(new Array(b+2+1)).join(" ")}if(n.toString().charAt(0)=="_"&&!d.nonAnonBNodes.exists(n.toString())){if(d.lists.exists(n.toNT())){e=e+d.renderList(n.toNT(),b+3)}else{e=e+l+"[ "+d.anonBNode(n.toString(),b+2+2)+l+(k.length==1?" ":"")+"]"}}else{e=e+l+d.output(n)}if(k.length-1!=m){if(k.length>2){e=e+","+(new Array(b+2+2)).join(" ")}else{e=e+", "}}});e=e+(g.length-1==j?"":";\n")});return e},render:function(){var d=new Array;var c=this;this.skipSubjects=this.nonAnonBNodes.keys();this.nonAnonBNodes.keys().forEach(function(g,h,f){if(c.nonAnonBNodes.get(g)==1){c.nonAnonBNodes.remove(g)}});this.index.keys().forEach(function(g,h,f){var j="";if(g.charAt(0)=="_"){if(!c.nonAnonBNodes.exists(g)&&c.skipSubjects.indexOf(g)==-1){if(c.lists.exists(g)){j=c.renderList(g,2)+" "+c.propertyObjectChain(c.index.get(g))}else{j="[ "+c.anonBNode(g,2)+"\n]"}}}else{j=g+" "+c.propertyObjectChain(c.index.get(g))}if(j.length>0){d.push(j+" .\n")}});if(this.usedPrefixes.length>0){var b=new a.Hash;this.prefixMap.keys().forEach(function(f,g,j){if(c.usedPrefixes.indexOf(f)>=0){b.set(c.prefixMap.get(f),f)}});var e=b.keys();e.sort();e.reverse();d.unshift("");e.forEach(function(h,g,f){d.unshift("@prefix "+h+" <"+b.get(h)+"> .")})}return d.join("\n")},renderList:function(j,c){var f=this;var h=new Array;f.lists.get(j).forEach(function(m,l,k){h.push(f.output(m))});var e=new Array;var g="";while(h.length>0){var b=h.shift();if(g.length+b.length<75){g=g.concat(b+" ")}else{e.push(g);g=b+" "}}e.push(g);var d=e.length==1?" ":"\n"+(new Array(c)).join(" ");return"("+d+e.join(d)+(e.length==1?"":"\n")+")"},shrink:function(f,d){if(d==null){d=false}if(d&&f.equals(a.serializers.Turtle.RDF_TYPE)){return"a"}if(f.equals(a.serializers.Turtle.RDF_NIL)){return"()"}var e=0,c=this.prefixMap.keys();while(e<c.length){var b=c[e];++e;if(b==f.value.substring(0,b.length)){if(this.usedPrefixes.indexOf(b)==-1){this.usedPrefixes.push(b)}return f.value.replace(b,this.prefixMap.get(b))}}return f.toNT()},suckLists:function(g){var h=function(k){return function(m,l,n){return m.subject.equals(k)}};var d=function(k){return function(m,l,n){return m.property.equals(k)}};var j=function(k,l){return function(n,m,o){return n.property.equals(k)&&n.object.equals(l)}};var b=function(k){return function(m,l,n){return !(m.subject.equals(k.subject)&&m.property.equals(k.property)&&m.object.equals(k.object))}};var e=g.filter(function(l,k,m){return l.property.equals(a.serializers.Turtle.RDF_FIRST)||l.property.equals(a.serializers.Turtle.RDF_REST)});e.forEach(function(l,k,m){g=g.filter(b(l))});var c=e.filter(function(l,k,m){return l.object.equals(a.serializers.Turtle.RDF_NIL)});var f=this;c.forEach(function(r,k,l){var o=new Array;var m=r;var p=null;while(m!=null){p=m.subject;o.unshift(e.filter(h(p)).filter(d(a.serializers.Turtle.RDF_FIRST)).toArray().pop().object);e=e.filter(function(q,s,n){return !q.subject.equals(p)});m=e.filter(j(a.serializers.Turtle.RDF_REST,p)).toArray().pop()}f.lists.set(p.toNT(),o)});return g}};a.nt=function(b){return new a.serializers.NTriples(a.data.context).serialize(b)};a.turtle=function(b){return new a.serializers.Turtle(a.data.context).serialize(b)}})(rdfapi);(function(a){a.filters={s:function(b){return function(c){return b.equals(c.subject)}},p:function(b){return function(c){return b.equals(c.property)}},o:function(b){return function(c){return b.equals(c.object)}},sp:function(b,c){return function(d){return b.equals(d.subject)&&c.equals(d.property)}},so:function(b,c){return function(d){return b.equals(d.subject)&&c.equals(d.object)}},po:function(b,c){return function(d){return b.equals(d.property)&&c.equals(d.object)}},spo:function(b,c,d){return function(e){return b.equals(e.subject)&&c.equals(e.property)&&d.equals(e.object)}},describes:function(b){return function(c){return b.equals(c.subject)||b.equals(c.object)}}}})(rdfapi);